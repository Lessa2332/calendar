<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Магічний пазл для зірочки</title>
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    body, html {margin:0;padding:0;height:100%;overflow:hidden;background:transparent;font-family:'Comic Sans MS',cursive}
    canvas {position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;display:none;background:transparent}
    #closeBtn {position:fixed;top:20px;right:20px;width:60px;height:60px;font-size:30px;z-index:101;background:#ff1493;color:white;border:none;border-radius:50%;display:none}
    .screen {position:fixed;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;color:white;background:rgba(0,0,0,0.7);z-index:999;text-align:center}
    #startScreen {background:radial-gradient(circle at center, rgba(255,20,147,0.8), transparent)}
    button {background:#ff1493;color:white;border:none;padding:20px 50px;border-radius:50px;font-size:30px;cursor:pointer;box-shadow:0 0 40px #ff1493}
  </style>
</head>
<body>
  <canvas id="puzzleCanvas"></canvas>
  <button id="closeBtn">X</button>

  <div id="startScreen" class="screen">
    <h1>Магічний пазл</h1>
    <button id="startBtn">ПОЧАТИ МАГІЮ!</button>
  </div>

  <div id="loadingScreen" class="screen" style="display:none">
    <h2>Завантаження AR...</h2>
  </div>

  <div id="hintScreen" class="screen" style="display:none">
    <h2>Покажи маркер камері!</h2>
    <img id="preview" src="" style="width:150px;height:150px;border:5px solid gold;border-radius:20px;margin:20px">
  </div>

  <div id="winScreen" class="screen" style="display:none">
    <h1>УРААА! Ти найкраща!</h1>
  </div>

  <a-scene embedded
    mindar-image="imageTargetSrc: ./calendar.mind; uiLoading: no; uiScanning: no; uiError: no; filterMinCF: 0.0001; filterBeta: 0.001"
    renderer="colorManagement: true; antialias: true"
    vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: false"
    style="position:fixed;inset:0;background:transparent">
    <a-camera active="false"></a-camera>
  </a-scene>

  <script>
    // (весь твій останній код без змін, тільки додай це в targetFound):
    entity.addEventListener('targetFound', () => {
      document.getElementById('preview').src = `images/${String(config.id+1).padStart(2,'0')}.jpg`;
      // ... решта коду
    });
    // і в checkCompletion():
    confetti({particleCount:300, spread:120, origin:{y:0.6}});
  </script>
</body>
</html>
